<div id='mount'></div>
<style>
  a {
    color: red;
  }

  a .foobar {
    color: red;
  }

  .foobar {
    color: orange;
  }
</style>
<script type='module'>

import { html, applyTemplate } from '../dist/straylight.js';

customElements.define('new-tab-link', class extends HTMLElement {

  constructor() {
    super();
    this.attachShadow({ mode: 'open' });
  }

  static observedAttributes = ['href'];

  connectedCallback() {
    this.render();
  }

  attributeChangedCallback() {
    this.render();
  }

  render() {
    applyTemplate(this.shadowRoot, html`
      <style>
        a {
          color: green;
        }

        a .foobar {
          color: blue !important;
        }
      </style>
      <a href=${this.getAttribute('href')} target='_blank' rel='noopener noreferrer'>
        <slot></slot>
      </a>
    `);
  }

});

customElements.define('kevin-test', class extends HTMLElement {
  constructor() {
    super();
  }

  connectedCallback() {
    this.render();
  }

  attributeChangedCallback() {
    this.render();
  }

  render() {
  }
});

applyTemplate('#mount', html`
  <new-tab-link href='https://www.google.com'>
    Search engine
    <span class='foobar'>foobar</span>
  </new-tab-link>
  <div>
    <kevin-test><button>Press Me</button></kevin-test>
  </div>
`);

</script>
